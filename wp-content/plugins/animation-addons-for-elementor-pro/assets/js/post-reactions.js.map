{"version":3,"file":"post-reactions.js","names":["AaeAddonGetVisitedPosts","visitedPosts","localStorage","getItem","JSON","parse","AaeAddonaddVisitedPost","postId","includes","push","setItem","stringify","AaeAddonDisbaleAllbtn","btns","forEach","btn","WCF_ADDONS_JS","post_id","disabled","AAEPost_Reactions","scope","length","reactionBtns","querySelectorAll","addEventListener","reaction","dataset","rtype","fetch","ajaxUrl","method","headers","body","URLSearchParams","action","nonce","_wpnonce","then","response","json","data","success","querySelector","textContent","window","elementorFrontend","hooks","addAction"],"sources":["post-reactions.js"],"sourcesContent":["(function() {\r\n    /**\r\n     * @param {Element} scope The Widget wrapper element\r\n     */\r\n     \r\n    function AaeAddonGetVisitedPosts() {\r\n        const visitedPosts = localStorage.getItem('aaeReactionsPosts');\r\n        return visitedPosts ? JSON.parse(visitedPosts) : [];\r\n    }\r\n    \r\n    function AaeAddonaddVisitedPost(postId) {\r\n        const visitedPosts = AaeAddonGetVisitedPosts();\r\n        if (!visitedPosts.includes(postId)) {\r\n          visitedPosts.push(postId);\r\n          localStorage.setItem('aaeReactionsPosts', JSON.stringify(visitedPosts));\r\n        }\r\n    }\r\n    \r\n    function AaeAddonDisbaleAllbtn(btns){\r\n        const visitedPosts = AaeAddonGetVisitedPosts();\r\n        btns.forEach(function(btn) {\r\n            if(visitedPosts.includes(WCF_ADDONS_JS.post_id)){\r\n                btn.disabled = true;\r\n            }\r\n        });\r\n    }\r\n    const AAEPost_Reactions = function(scope) {\r\n       \r\n        const visitedPosts = AaeAddonGetVisitedPosts();\r\n        if(scope.length){    \r\n            const reactionBtns = scope[0].querySelectorAll('.aaeaddon-reaction-btn');   \r\n            reactionBtns.forEach(function(btn) {\r\n                if(visitedPosts.includes(WCF_ADDONS_JS.post_id)){\r\n                    btn.disabled = true;\r\n                }\r\n                btn.addEventListener('click', function() {\r\n                    const reaction = btn.dataset.rtype;                    \r\n                    // Show a loading state                  \r\n                    btn.disabled = true;\r\n                    // Make the AJAX request using Fetch API\r\n                    fetch(WCF_ADDONS_JS.ajaxUrl, {\r\n                        method: 'POST',\r\n                        headers: {\r\n                            'Content-Type': 'application/x-www-form-urlencoded'\r\n                        },\r\n                        body: new URLSearchParams({\r\n                            action: 'aaeaddon_post_reaction',\r\n                            reaction: reaction,\r\n                            post_id: WCF_ADDONS_JS.post_id, // Post ID to update share count\r\n                            nonce : WCF_ADDONS_JS._wpnonce\r\n                        })\r\n                    })\r\n                    .then(response => response.json())\r\n                    .then(data => {\r\n                        if (data.success) { \r\n                        \r\n                            if(btn.querySelector('.aae-reaction-count')){\r\n                                btn.querySelector('.aae-reaction-count').textContent = data.data[reaction];       \r\n                            }                                                  \r\n                            btn.disabled = true;\r\n                            AaeAddonaddVisitedPost(WCF_ADDONS_JS.post_id)\r\n                            AaeAddonDisbaleAllbtn(reactionBtns);\r\n                        } else {                           \r\n                            btn.textContent = 'Try Again';\r\n                            btn.disabled = false;\r\n                        }\r\n                    })\r\n                    .catch(() => {\r\n                        btn.disabled = false;\r\n                        btn.textContent = 'Retry';\r\n                    });\r\n                });\r\n            });\r\n        }\r\n    };\r\n\r\n    // Ensure the function runs under Elementor\r\n    window.addEventListener('elementor/frontend/init', function() {\r\n        elementorFrontend.hooks.addAction('frontend/element_ready/aaeaddon-post-reactions.default', AAEPost_Reactions);\r\n    });\r\n})();\r\n"],"mappings":"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","ignoreList":[]}