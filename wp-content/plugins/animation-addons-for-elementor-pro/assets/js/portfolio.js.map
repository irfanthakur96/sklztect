{"version":3,"file":"portfolio.js","names":["$","WcfPosts","$scope","$buttons","find","$items","on","filter","data","addClass","siblings","removeClass","portfolioFilterItems","state","Flip","getState","toArray","each","$item","hasClass","show","hide","from","duration","ease","stagger","loadMore","elementId","isLoading","currentPage","maxPage","e","preventDefault","handlePostsQuery","handleUiBeforeLoading","nextPageUrl","attr","fetch","then","response","text","html","parser","DOMParser","doc","parseFromString","handleSuccessFetch","result","handleUiAfterLoading","postsElements","querySelectorAll","concat","querySelector","getAttribute","forEach","element","append","window","elementorFrontend","hooks","addAction","jQuery"],"sources":["portfolio.js"],"sourcesContent":["/* global WCF_ADDONS_JS */\r\n(function ($) {\r\n    /**\r\n     * @param $scope The Widget wrapper element as a jQuery element\r\n     * @param $ The jQuery alias\r\n     */\r\n    const WcfPosts = function ($scope, $) {\r\n        const $buttons = $scope.find(\".wcf__portfolio .filter button\");\r\n        const $items = $scope.find(\".enable-filter .wcf-post\");\r\n\r\n        $buttons.on(\"click\", function () {\r\n            const filter = $(this).data(\"filter\");\r\n            $(this).addClass('mixitup-control-active').siblings().removeClass('mixitup-control-active');\r\n            portfolioFilterItems(filter);\r\n        });\r\n\r\n        function portfolioFilterItems(filter) {\r\n            const state = Flip.getState($items.toArray());\r\n\r\n            $items.each(function () {\r\n                const $item = $(this);\r\n                if (filter === \"all\" || $item.hasClass(filter)) {\r\n                    $item.show();\r\n                } else {\r\n                    $item.hide();\r\n                }\r\n            });\r\n\r\n            Flip.from(state, {\r\n                duration: 0.5,\r\n                ease: \"power1.inOut\",\r\n                stagger: 0.1,\r\n            });\r\n        }\r\n\r\n        //load more\r\n        const loadMore = $('.pf-load-more a', $scope)\r\n        const elementId = $('.load-more-anchor', $scope).data('e-id');\r\n        let isLoading = false;\r\n        let currentPage = $('.load-more-anchor', $scope).data('page');\r\n        let maxPage = $('.load-more-anchor', $scope).data('max-page');\r\n\r\n        loadMore.on('click', function (e) {\r\n            e.preventDefault()\r\n\r\n            if (currentPage < maxPage) {\r\n                handlePostsQuery();\r\n            }\r\n        })\r\n\r\n        const handlePostsQuery = function () {\r\n            handleUiBeforeLoading();\r\n\r\n            if (isLoading) {\r\n                $('.wcf__btn', $scope).addClass('loading');\r\n            }\r\n\r\n            currentPage++;\r\n            const nextPageUrl = $('.load-more-anchor', $scope).attr('data-next-page');\r\n            return fetch(nextPageUrl).then(response => response.text()).then(html => {\r\n                // Convert the HTML string into a document object\r\n                const parser = new DOMParser();\r\n                const doc = parser.parseFromString(html, 'text/html');\r\n                handleSuccessFetch(doc);\r\n            });\r\n        }\r\n\r\n        const handleSuccessFetch = function (result) {\r\n            handleUiAfterLoading();\r\n\r\n            const postsElements = result.querySelectorAll(`[data-id=\"${elementId}\"] .wcf-posts > article`);\r\n            const nextPageUrl = result.querySelector(`[data-id=\"${elementId}\"] .load-more-anchor`).getAttribute('data-next-page');\r\n\r\n            postsElements.forEach(element => $(`[data-id=\"${elementId}\"] .wcf-posts`).append(element));\r\n\r\n            $('.load-more-anchor', $scope).attr('data-page', currentPage);\r\n            $('.load-more-anchor', $scope).attr('data-next-page', nextPageUrl);\r\n\r\n            if (!isLoading) {\r\n                $('.wcf__btn', $scope).removeClass('loading');\r\n            }\r\n\r\n            if (currentPage === maxPage) {\r\n                loadMore.hide();\r\n            }\r\n\r\n        }\r\n\r\n        const handleUiBeforeLoading = function () {\r\n            isLoading = true;\r\n        }\r\n\r\n        const handleUiAfterLoading = function () {\r\n            isLoading = false;\r\n        }\r\n\r\n    };\r\n\r\n    // Make sure you run this code under Elementor.\r\n    $(window).on('elementor/frontend/init', function () {\r\n        elementorFrontend.hooks.addAction('frontend/element_ready/wcf--portfolio.default', WcfPosts);\r\n    });\r\n})(jQuery);"],"mappings":"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","ignoreList":[]}